"use strict";(self.webpackChunkstreamlit_browser=self.webpackChunkstreamlit_browser||[]).push([[728],{28450:function(e,t,n){n.r(t),n.d(t,{default:function(){return fe}});var i=n(29439),r=n(1413),o=n(47313),a=n(56130),l=n(91719),d=n(30161),u=n(46332),s=n(26419),c=n(7976),f=n(64243),h=n(15671),g=n(43144),m=function(){function e(t){(0,h.Z)(this,e),this.editedCells=new Map,this.addedRows=[],this.deletedRows=[],this.numRows=0,this.numRows=t}return(0,g.Z)(e,[{key:"toJson",value:function(e){var t=new Map;e.forEach((function(e){t.set(e.indexNumber,e)}));var n={edited_cells:{},added_rows:[],deleted_rows:[]};return this.editedCells.forEach((function(e,i,r){e.forEach((function(e,r,o){var a=t.get(r);a&&(n.edited_cells["".concat(i,":").concat(r)]=a.getCellValue(e))}))})),this.addedRows.forEach((function(e){var i={};e.forEach((function(e,n,r){var o=t.get(n);if(o){var a=o.getCellValue(e);(0,f.bb)(a)&&(i[n]=a)}})),n.added_rows.push(i)})),n.deleted_rows=this.deletedRows,JSON.stringify(n,(function(e,t){return void 0===t?null:t}))}},{key:"fromJson",value:function(e,t){var n=this,r=JSON.parse(e),o=new Map;t.forEach((function(e){o.set(e.indexNumber,e)})),Object.keys(r.edited_cells).forEach((function(e){var t=e.split(":").map(Number),a=(0,i.Z)(t,2),l=a[0],d=a[1],u=o.get(d);if(u){var s,c=u.getCell(r.edited_cells[e]);if(c)0==n.editedCells.has(l)&&n.editedCells.set(l,new Map),null===(s=n.editedCells.get(l))||void 0===s||s.set(d,c)}})),r.added_rows.forEach((function(e){var i=new Map;t.forEach((function(e){i.set(e.indexNumber,e.getCell(void 0))})),Object.keys(e).forEach((function(t){var n=o.get(Number(t));if(n){var r=n.getCell(e[Number(t)]);r&&i.set(Number(t),r)}})),n.addedRows.push(i)})),this.deletedRows=r.deleted_rows}},{key:"isAddedRow",value:function(e){return e>=this.numRows}},{key:"getCell",value:function(e,t){if(this.isAddedRow(t))return this.addedRows[t-this.numRows].get(e);var n=this.editedCells.get(t);return void 0!==n?n.get(e):void 0}},{key:"setCell",value:function(e,t,n){if(this.isAddedRow(t)){if(t-this.numRows>=this.addedRows.length)return;this.addedRows[t-this.numRows].set(e,n)}else{void 0===this.editedCells.get(t)&&this.editedCells.set(t,new Map),this.editedCells.get(t).set(e,n)}}},{key:"addRow",value:function(e){this.addedRows.push(e)}},{key:"deleteRows",value:function(e){var t=this;e.sort((function(e,t){return t-e})).forEach((function(e){t.deleteRow(e)}))}},{key:"deleteRow",value:function(e){(0,f.le)(e)||e<0||(this.isAddedRow(e)?this.addedRows.splice(e-this.numRows,1):(this.deletedRows.includes(e)||(this.deletedRows.push(e),this.deletedRows=this.deletedRows.sort((function(e,t){return e-t}))),this.editedCells.delete(e)))}},{key:"getOriginalRowIndex",value:function(e){for(var t=e,n=0;n<this.deletedRows.length&&!(this.deletedRows[n]>t);n++)t+=1;return t}},{key:"getNumRows",value:function(){return this.numRows+this.addedRows.length-this.deletedRows.length}}]),e}(),v=n(2120),b=n(83985);var p=function(){var e=(0,b.u)();return{accentColor:e.colors.primary,accentFg:e.colors.white,accentLight:(0,v.DZ)(e.colors.primary,.9),borderColor:e.colors.fadedText05,horizontalBorderColor:e.colors.fadedText05,fontFamily:e.genericFonts.bodyFont,bgSearchResult:(0,v.DZ)(e.colors.primary,.9),bgIconHeader:e.colors.fadedText60,fgIconHeader:e.colors.white,bgHeader:e.colors.bgMix,bgHeaderHasFocus:e.colors.secondaryBg,bgHeaderHovered:e.colors.bgMix,textHeader:e.colors.fadedText60,textHeaderSelected:e.colors.white,textGroupHeader:e.colors.fadedText60,headerFontStyle:"".concat(e.fontSizes.sm),baseFontStyle:e.fontSizes.sm,editorFontSize:e.fontSizes.sm,textDark:e.colors.bodyText,textMedium:(0,v.DZ)(e.colors.bodyText,.2),textLight:e.colors.fadedText40,textBubble:e.colors.fadedText60,bgCell:e.colors.bgColor,bgCellMedium:e.colors.bgColor,cellHorizontalPadding:8,cellVerticalPadding:3,bgBubble:e.colors.secondaryBg,bgBubbleSelected:e.colors.secondaryBg,linkColor:e.colors.linkText,drilldownBorder:e.colors.darkenedBgMix25,tableBorderRadius:e.radii.md}},w=n(72599),y=n(93433),C=n(45429),x=n(16031),M=n(35394),Z=n.n(M);function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e="\u26a0\ufe0f ".concat(e),{kind:a.p6.Text,readonly:!0,allowOverlay:!0,data:e+(t?"\n\n".concat(t,"\n"):""),displayData:e,isError:!0}}function E(e){return e.hasOwnProperty("isError")&&e.isError}function k(e){return(0,r.Z)((0,r.Z)({id:e.id,title:e.title,hasMenu:!1,themeOverride:e.themeOverride},e.isStretched&&{grow:e.isIndex?1:3}),e.width&&{width:e.width})}function N(e,t){return(0,f.le)(e)?t||{}:(0,f.le)(t)?e||{}:(0,x.merge)(e,t)}function T(e){if((0,f.le)(e))return[];if("number"===typeof e||"boolean"===typeof e)return[e];if("string"===typeof e){if(""===e)return[];if(!e.trim().startsWith("[")||!e.trim().endsWith("]"))return e.split(",");try{return JSON.parse(e)}catch(n){return[e]}}try{var t=JSON.parse(JSON.stringify(e,(function(e,t){return"bigint"===typeof t?Number(t):t})));return(0,x.isArray)(t)?t.map((function(e){return["string","number","boolean","null"].includes(typeof e)?e:S(e)})):[S(t)]}catch(n){return[S(e)]}}function S(e){try{try{return(0,x.toString)(e)}catch(t){return JSON.stringify(e,(function(e,t){return"bigint"===typeof t?Number(t):t}))}}catch(t){return"[".concat(typeof e,"]")}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!Number.isNaN(e)&&Number.isFinite(e)?(0===t&&(e=Math.round(e)),Z()(e).format(n?"0,0.".concat("0".repeat(t)):"0,0.[".concat("0".repeat(t),"]"))):""}function D(e){var t={kind:a.p6.Text,data:"",displayData:"",allowOverlay:!0,contentAlignment:e.contentAlignment,readonly:!0,style:e.isIndex?"faded":"normal"};return(0,r.Z)((0,r.Z)({},e),{},{kind:"object",sortMode:"default",isEditable:!1,getCell:function(e){try{var n=(0,f.bb)(e)?S(e):null,i=(0,f.bb)(n)?n:"";return(0,r.Z)((0,r.Z)({},t),{},{data:n,displayData:i,isMissingValue:(0,f.le)(e)})}catch(o){return R(S(e),"The value cannot be interpreted as a string. Error: ".concat(o))}},getCellValue:function(e){return void 0===e.data?null:e.data}})}D.isEditableType=!1;var A=D;function H(e){var t={kind:a.p6.Text,data:"",displayData:"",allowOverlay:!0,contentAlignment:e.contentAlignment,readonly:!e.isEditable,style:e.isIndex?"faded":"normal"};return(0,r.Z)((0,r.Z)({},e),{},{kind:"text",sortMode:"default",getCell:function(e){try{var n=(0,f.bb)(e)?S(e):null,i=(0,f.bb)(n)?n:"";return(0,r.Z)((0,r.Z)({},t),{},{isMissingValue:(0,f.le)(n),data:n,displayData:i})}catch(o){return R("Incompatible value","The value cannot be interpreted as string. Error: ".concat(o))}},getCellValue:function(e){return void 0===e.data?null:e.data}})}H.isEditableType=!0;var I=H,V=["true","t","yes","y","on","1"],z=["false","f","no","n","off","0"];function W(e){var t={kind:a.p6.Boolean,data:!1,allowOverlay:!1,contentAlign:e.contentAlignment,readonly:!e.isEditable,style:e.isIndex?"faded":"normal"};return(0,r.Z)((0,r.Z)({},e),{},{kind:"boolean",sortMode:"default",getCell:function(e){var n=null;if((0,f.bb)(e))if("boolean"===typeof e)n=e;else{var i=String(e).toLowerCase().trim();if(""===i)n=null;else if(V.includes(i))n=!0;else{if(!z.includes(i))return R(S(e),"The value cannot be interpreted as boolean.");n=!1}}return(0,r.Z)((0,r.Z)({},t),{},{data:n})},getCellValue:function(e){return void 0===e.data?null:e.data}})}W.isEditableType=!0;var L=W;function F(e){var t=N({options:"bool"===C.fu.getTypeName(e.arrowType)?["true","false"]:[]},e.columnTypeMetadata),n={kind:a.p6.Custom,allowOverlay:e.isEditable,copyData:"",contentAlign:e.contentAlignment,data:{kind:"dropdown-cell",allowedValues:[""].concat((0,y.Z)(t.options.filter((function(e){return""!==e})))),value:"",readonly:!e.isEditable}};return(0,r.Z)((0,r.Z)({},e),{},{kind:"categorical",sortMode:"default",getCell:function(e){var t="";return(0,f.bb)(e)&&(t=S(e)),n.data.allowedValues.includes(t)?(0,r.Z)((0,r.Z)({},n),{},{isMissingValue:""===t,copyData:t,data:(0,r.Z)((0,r.Z)({},n.data),{},{value:t})}):R(S(t),"The value is not part of the allowed options.")},getCellValue:function(e){var t,n,i;return void 0===(null===(t=e.data)||void 0===t?void 0:t.value)||""===(null===(n=e.data)||void 0===n?void 0:n.value)?null:null===(i=e.data)||void 0===i?void 0:i.value}})}F.isEditableType=!0;var _=F;function B(e){var t={kind:a.p6.Bubble,data:[],allowOverlay:!0,contentAlign:e.contentAlignment,style:e.isIndex?"faded":"normal"};return(0,r.Z)((0,r.Z)({},e),{},{kind:"list",sortMode:"default",isEditable:!1,getCell:function(e){return(0,r.Z)((0,r.Z)({},t),{},{data:T(e),isMissingValue:(0,f.le)(e)})},getCellValue:function(e){return void 0===e.data?null:e.data}})}B.isEditableType=!1;var j=B;function J(e){var t=C.fu.getTypeName(e.arrowType),n=N({precision:t.startsWith("int")||"range"===t||t.startsWith("uint")?0:void 0,min:t.startsWith("uint")?0:void 0},e.columnTypeMetadata),i=(0,f.le)(n.min)||n.min<0,o=(0,f.bb)(n.precision)?n.precision:void 0,l={kind:a.p6.Number,data:void 0,displayData:"",readonly:!e.isEditable,allowOverlay:!0,contentAlign:e.contentAlignment||"right",style:e.isIndex?"faded":"normal",allowNegative:i,fixedDecimals:o};return(0,r.Z)((0,r.Z)({},e),{},{kind:"number",sortMode:"smart",getCell:function(e){var t=function(e){if((0,f.le)(e))return null;if((0,x.isArray)(e))return NaN;if("string"===typeof e){if(0===e.trim().length)return null;try{var t=Z().unformat(e.trim());if((0,f.bb)(t))return t}catch(n){}}else if(e instanceof Int32Array)return Number(e[0]);return Number(e)}(e);if((0,f.bb)(t)){if(Number.isNaN(t))return R(S(e),"The value cannot be interpreted as a number.");(0,f.bb)(n.precision)&&(t=0===n.precision?Math.trunc(t):Math.trunc(t*Math.pow(10,n.precision))/Math.pow(10,n.precision)),(0,f.bb)(n.min)&&(t=Math.max(t,n.min)),(0,f.bb)(n.max)&&(t=Math.min(t,n.max))}return(0,r.Z)((0,r.Z)({},l),{},{data:t,displayData:(0,f.bb)(t)?O(t):"",isMissingValue:(0,f.le)(t)})},getCellValue:function(e){return void 0===e.data?null:e.data}})}J.isEditableType=!0;var P=J,Y=new Map(Object.entries({object:A,text:I,boolean:L,categorical:_,list:j,number:P}));function U(e,t,n){var i=new RegExp("".concat(e,"[,\\s].*{(?:[^}]*[\\s;]{1})?").concat(t,":\\s*([^;}]+)[;]?.*}"),"gm");n=n.replace(/{/g," {");var r=i.exec(n);if(r)return r[1].trim()}function G(e){return e.replace(/(\r\n|\n|\r)/gm," ")}function X(e,t,n){var i={},o=U(t,"color",n);o&&(i.textDark=o);var a=U(t,"background-color",n);return a&&(i.bgCell=a),"yellow"===a&&void 0===o&&(i.textDark="#31333F"),i?(0,r.Z)((0,r.Z)({},e),{},{themeOverride:i}):e}function K(e,t){var n=e.types.index[t],i=e.indexNames[t],r=!0;return"range"===C.fu.getTypeName(n)&&(r=!1),{id:"index-".concat(t),isEditable:r,title:i,arrowType:n,isIndex:!0,isHidden:!1}}function q(e,t){var n,i=e.columns[0][t],r=e.types.data[t];if((0,f.le)(r)&&(r={meta:null,numpy_type:"object",pandas_type:"object"}),"categorical"===C.fu.getTypeName(r)){var o=e.getCategoricalOptions(t);(0,f.bb)(o)&&(n={options:[""].concat((0,y.Z)(o.filter((function(e){return""!==e}))))})}return{id:"column-".concat(i,"-").concat(t),isEditable:!0,title:i,arrowType:r,columnTypeMetadata:n,isIndex:!1,isHidden:!1}}var Q=function(e,t,n,l){var d=o.useCallback((function(o){var d=(0,i.Z)(o,2),u=d[0],s=d[1];if(u>t.length-1)return R("Column index out of bounds.","This should never happen. Please report this bug.");if(s>n-1)return R("Row index out of bounds.","This should never happen. Please report this bug.");var c=t[u],h=c.indexNumber,g=l.current.getOriginalRowIndex(s);if(c.isEditable||l.current.isAddedRow(g)){var m=l.current.getCell(h,g);if(void 0!==m)return m}try{return function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(E(n="object"===e.kind?e.getCell((0,f.bb)(t.content)?G(C.fu.format(t.content,t.contentType,t.field)):null):e.getCell(t.content)))return n;if((0,f.bb)(t.displayContent)){var o=G(t.displayContent);(n.kind===a.p6.Text||n.kind===a.p6.Number)&&(n=(0,r.Z)((0,r.Z)({},n),{},{displayData:o}))}return i&&t.cssId&&(n=X(n,t.cssId,i)),n}(c,e.getCell(g+1,h),e.cssStyles)}catch(v){return(0,w.H)(v),R("Error during cell creation.","This should never happen. Please report this bug. \nError: ".concat(v))}}),[t,n,e,l]);return{getCellContent:d}};var $=function(e,t,n,r,a){var l,d=function(e){return Math.max(35*e+1+2,73)}(t+1+(e.editingMode===c.Eh.EditingMode.DYNAMIC?1:0)),u=Math.min(d,400);e.height&&(u=Math.max(e.height,73),d=Math.max(e.height,d)),r&&(u=Math.min(u,r),d=Math.min(d,r),e.height||(u=d));var s=n;e.useContainerWidth?l=n:e.width&&(l=Math.min(Math.max(e.width,52),n),s=Math.min(Math.max(e.width,s),n));var h=o.useState({width:l||"100%",height:u}),g=(0,i.Z)(h,2),m=g[0],v=g[1];return o.useLayoutEffect((function(){e.useContainerWidth&&"100%"===m.width&&v({width:n,height:m.height})}),[n]),o.useLayoutEffect((function(){v({width:m.width,height:u})}),[t]),o.useLayoutEffect((function(){v({width:l||"100%",height:m.height})}),[l]),o.useLayoutEffect((function(){v({width:m.width,height:u})}),[u]),o.useLayoutEffect((function(){if(a){var t=e.useContainerWidth||(0,f.bb)(e.width)&&e.width>0;v({width:t?s:"100%",height:d})}else v({width:l||"100%",height:u})}),[a]),{rowHeight:35,minHeight:73,maxHeight:d,minWidth:52,maxWidth:s,resizableSize:m,setResizableSize:v}};var ee=function(e,t,n,a,l,d,u){var s=o.useCallback((function(t,o){var d=(0,i.Z)(t,2),s=d[0],c=d[1],f=e[s],h=f.indexNumber,g=n.current.getOriginalRowIndex(l(c)),m=a([s,c]),v=f.getCellValue(m),b=f.getCellValue(o);if(E(m)||b!==v){var p=f.getCell(b);n.current.setCell(h,g,(0,r.Z)((0,r.Z)({},p),{},{lastUpdated:performance.now()})),u()}}),[e,n,l,a,u]),c=o.useCallback((function(){if(!t){var i=new Map;e.forEach((function(e){i.set(e.indexNumber,e.getCell(void 0))})),n.current.addRow(i),u(!1,!1)}}),[e,n,t]),f=o.useCallback((function(i){var r;if(i.rows.length>0){if(t)return!0;var o=i.rows.toArray().map((function(e){return n.current.getOriginalRowIndex(l(e))}));return n.current.deleteRows(o),u(!0),!1}if(null!==(r=i.current)&&void 0!==r&&r.range){for(var a=[],c=i.current.range,f=c.y;f<c.y+c.height;f++)for(var h=c.x;h<c.x+c.width;h++){var g=e[h];g.isEditable&&(a.push({cell:[h,f]}),s([h,f],g.getCell(null)))}return a.length>0&&(u(),d(a)),!1}return!0}),[e,n,t,d,l,u]),h=o.useCallback((function(o,s){for(var f=(0,i.Z)(o,2),h=f[0],g=f[1],m=[],v=0;v<s.length;v++){var b=s[v];if(v+g>=n.current.getNumRows()){if(t)break;c()}for(var p=0;p<b.length;p++){var w=b[p],y=v+g,C=p+h;if(C>=e.length)break;var x=e[C];if(x.isEditable){var M=x.getCell(w);if(!E(M)){var Z=x.indexNumber,R=n.current.getOriginalRowIndex(l(y)),k=x.getCellValue(a([C,y]));x.getCellValue(M)!==k&&(n.current.setCell(Z,R,(0,r.Z)((0,r.Z)({},M),{},{lastUpdated:performance.now()})),m.push({cell:[C,y]}))}}}m.length>0&&(u(),d(m))}return!1}),[e,n,t,l,a,c,u,d]);return{onCellEdited:s,onPaste:h,onRowAppended:c,onDelete:f}};var te=function(e){var t=(0,o.useState)((function(){return new Map})),n=(0,i.Z)(t,2),a=n[0],l=n[1],d=o.useCallback((function(e,t,n,i){e.id&&l(new Map(a).set(e.id,i))}),[a]);return{columns:e.map((function(e){return e.id&&a.has(e.id)&&void 0!==a.get(e.id)?(0,r.Z)((0,r.Z)({},e),{},{width:a.get(e.id),grow:0}):e})),onColumnResize:d}},ne=n(34264);var ie=function(e,t,n){var a=o.useState(),l=(0,i.Z)(a,2),d=l[0],u=l[1],s=(0,ne.fF)({columns:t.map((function(e){return k(e)})),getCellContent:n,rows:e,sort:d}),c=s.getCellContent,f=s.getOriginalIndex,h=function(e,t){return void 0===t?e:e.map((function(e){return e.id===t.column.id?(0,r.Z)((0,r.Z)({},e),{},{title:"asc"===t.direction?"\u2191 ".concat(e.title):"\u2193 ".concat(e.title)}):e}))}(t,d),g=o.useCallback((function(e){var t="asc",n=h[e];if(d&&d.column.id===n.id){if("asc"!==d.direction)return void u(void 0);t="desc"}u({column:k(n),direction:t,mode:n.sortMode})}),[d,h]);return{columns:h,sortColumn:g,getOriginalIndex:f,getCellContent:c}},re="index",oe="col:";function ae(e){var t;return(0,f.bb)(e.customType)&&(Y.has(e.customType)?t=Y.get(e.customType):(0,w.KE)("Unknown column type configured in column configuration: ".concat(e.customType))),(0,f.le)(t)&&(t=function(e){var t=e?C.fu.getTypeName(e):null;return t?(t=t.toLowerCase().trim(),["unicode","empty"].includes(t)?I:["object","date","time","datetime","datetimetz","decimal","bytes"].includes(t)?A:["bool"].includes(t)?L:["int8","int16","int32","int64","uint8","uint16","uint32","uint64","float16","float32","float64","float96","float128","range"].includes(t)?P:"categorical"===t?_:t.startsWith("list")?j:A):A}(e.arrowType)),t}var le=function(e,t,n){var i=function(e){if(!e.columns)return new Map;try{return new Map(Object.entries(JSON.parse(e.columns)))}catch(t){return(0,w.H)(t),new Map}}(e),o=e.useContainerWidth||(0,f.bb)(e.width)&&e.width>0,a=function(e){var t,n,i,o,a,l,d=[],u=null!==(t=null===(n=e.types)||void 0===n||null===(i=n.index)||void 0===i?void 0:i.length)&&void 0!==t?t:0,s=null!==(o=null===(a=e.columns)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.length)&&void 0!==o?o:0;if(0===u&&0===s)return d.push({id:"empty-index",title:"",indexNumber:0,isEditable:!1,isIndex:!0}),d;for(var c=0;c<u;c++){var f=(0,r.Z)((0,r.Z)({},K(e,c)),{},{indexNumber:c});d.push(f)}for(var h=0;h<s;h++){var g=(0,r.Z)((0,r.Z)({},q(e,h)),{},{indexNumber:h+u});d.push(g)}return d}(t).map((function(t){var a=(0,r.Z)((0,r.Z)((0,r.Z)({},t),function(e,t){var n,i;return t?(t.has(e.title)?i=t.get(e.title):t.has("".concat(oe).concat(e.indexNumber))?i=t.get("".concat(oe).concat(e.indexNumber)):e.isIndex&&t.has(re)&&(i=t.get(re)),i?(0,x.merge)((0,r.Z)({},e),{title:i.title,width:i.width,customType:null===(n=i.type)||void 0===n?void 0:n.toLowerCase().trim(),isEditable:i.editable,isHidden:i.hidden,columnTypeMetadata:i.metadata,contentAlignment:i.alignment}):e):e}(t,i)),{},{isStretched:o}),l=ae(a);return(e.editingMode===c.Eh.EditingMode.READ_ONLY||n||!1===l.isEditableType)&&(a=(0,r.Z)((0,r.Z)({},a),{},{isEditable:!1})),l(a)})).filter((function(e){return!e.isHidden}));return{columns:a.length>0?a:[A({id:"empty-index",title:"",indexNumber:0,isEditable:!1,isIndex:!0})]}},de=n(4942),ue=(0,n(47167).Z)("div",{target:"e17g77xh0"})((function(e){var t;return{position:"relative",display:"inline-block","& .glideDataEditor":{height:"100%",minWidth:"100%",borderRadius:e.theme.radii.md},"& .dvn-scroller":(t={scrollbarWidth:"thin"},(0,de.Z)(t,"overflowX","overlay !important"),(0,de.Z)(t,"overflowY","overlay !important"),t)}}),""),se=(n(47288),n(46417)),ce=function(e){var t=e.cell,n=e.theme;return!!function(e){return e.hasOwnProperty("isMissingValue")&&e.isMissingValue}(t)&&((0,a.uN)((0,r.Z)((0,r.Z)({},e),{},{theme:(0,r.Z)((0,r.Z)({},n),{},{textDark:n.textLight,textMedium:n.textLight}),spriteManager:{},hyperWrapping:!1}),"None",t.contentAlign),!0)};var fe=(0,s.Z)((function(e){var t=e.element,n=e.data,s=e.width,h=e.height,g=e.disabled,v=e.widgetMgr,b=e.isFullScreen,w=o.useRef(null),y=o.useRef(null),C=(0,l.Bn)(),x=p(),M=o.useState(!0),Z=(0,i.Z)(M,2),R=Z[0],E=Z[1],N=o.useState({columns:a.EV.empty(),rows:a.EV.empty(),current:void 0}),T=(0,i.Z)(N,2),S=T[0],O=T[1],D=o.useCallback((function(){O({columns:a.EV.empty(),rows:a.EV.empty(),current:void 0})}),[]),A=o.useCallback((function(e){var t;null===(t=y.current)||void 0===t||t.updateCells(e)}),[]);(0,f.le)(t.editingMode)&&(t.editingMode=c.Eh.EditingMode.READ_ONLY);var H=c.Eh.EditingMode,I=H.READ_ONLY,V=H.DYNAMIC,z=n.dimensions,W=Math.max(0,z.rows-1),L=0===W&&!(t.editingMode===V&&z.dataColumns>0),F=W>15e4,_=o.useRef(new m(W)),B=o.useState(_.current.getNumRows()),j=(0,i.Z)(B,2),J=j[0],P=j[1];o.useEffect((function(){_.current=new m(W),P(_.current.getNumRows())}),[W]);var Y=o.useCallback((function(){_.current=new m(W),P(_.current.getNumRows())}),[W]),U=le(t,n,g).columns;o.useEffect((function(){if(t.editingMode!==I){var e=v.getStringValue(t);e&&(_.current.fromJson(e,U),P(_.current.getNumRows()))}}),[]);var G=Q(n,U,J,_).getCellContent,X=ie(W,U,G),K=X.columns,q=X.sortColumn,ne=X.getOriginalIndex,re=X.getCellContent,oe=o.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];J!==_.current.getNumRows()&&P(_.current.getNumRows()),e&&D(),(0,f.Ds)(100,(function(){var e=_.current.toJson(K),i=v.getStringValue(t);void 0===i&&(i=new m(0).toJson([])),e!==i&&v.setStringValue(t,e,{fromUi:n})}))()}),[v,t,J]),ae=ee(K,t.editingMode!==V,_,re,ne,A,oe),de=ae.onCellEdited,fe=ae.onPaste,he=ae.onRowAppended,ge=ae.onDelete,me=te(K.map((function(e){return k(e)}))),ve=me.columns,be=me.onColumnResize,pe=$(t,J,s,h,b),we=pe.rowHeight,ye=pe.minHeight,Ce=pe.maxHeight,xe=pe.minWidth,Me=pe.maxWidth,Ze=pe.resizableSize,Re=pe.setResizableSize,Ee=o.useCallback((function(e){var t=(0,i.Z)(e,2);t[0],t[1];return(0,r.Z)((0,r.Z)({},function(e,t){var n=t?"faded":"normal";return{kind:a.p6.Text,data:"",displayData:"",allowOverlay:!0,readonly:e,style:n}}(!0,!1)),{},{displayData:"empty",contentAlign:"center",allowOverlay:!1,themeOverride:{textDark:x.textLight},span:[0,Math.max(K.length-1,0)]})}),[K]);return o.useEffect((function(){var e=new u.Kz;return e.manageFormClearListener(v,t.formId,Y),function(){e.disconnect()}}),[]),(0,se.jsx)(ue,{className:"stDataFrame",onBlur:function(){R||D()},children:(0,se.jsx)(d.e,{"data-testid":"stDataFrameResizable",ref:w,defaultSize:Ze,style:{border:"1px solid ".concat(x.borderColor),borderRadius:"".concat(x.tableBorderRadius)},minHeight:ye,maxHeight:Ce,minWidth:xe,maxWidth:Me,size:Ze,enable:{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},grid:[1,we],snapGap:we/3,onResizeStop:function(e,t,n,i){w.current&&Re({width:w.current.size.width,height:Ce-w.current.size.height===3?w.current.size.height+3:w.current.size.height})},children:(0,se.jsx)(a.Nd,(0,r.Z)((0,r.Z)({className:"glideDataEditor",ref:y,columns:ve,rows:L?1:J,minColumnWidth:50,maxColumnWidth:1e3,maxColumnAutoWidth:500,rowHeight:we,headerHeight:we,getCellContent:L?Ee:re,onColumnResize:be,freezeColumns:L?0:K.filter((function(e){return e.isIndex})).length,smoothScrollX:!0,smoothScrollY:!0,verticalBorder:function(e){return!(e>=K.length&&(t.useContainerWidth||"100%"===Ze.width))},getCellsForSelection:!0,rowMarkers:"none",rangeSelect:"rect",columnSelect:"none",rowSelect:"none",keybindings:{search:!0,downFill:!0},onHeaderClicked:L||F?void 0:q,gridSelection:S,onGridSelectionChange:O,drawCell:ce,theme:x,onMouseMove:function(e){"out-of-bounds"===e.kind&&R?E(!1):"out-of-bounds"===e.kind||R||E(!0)},fixedShadowX:!0,fixedShadowY:!0,experimental:{scrollbarWidthOverride:1},customRenderers:C.customRenderers,onPaste:!1},!L&&t.editingMode!==I&&!g&&{fillHandle:!0,onCellEdited:de,onPaste:fe,onDelete:ge}),!L&&t.editingMode===V&&{trailingRowOptions:{sticky:!1,tint:!0},rowMarkerTheme:{bgCell:x.bgHeader,bgCellMedium:x.bgHeader},rowMarkers:"checkbox",rowSelectionMode:"auto",rowSelect:g?"none":"multi",onRowAppended:g?void 0:he,onHeaderClicked:void 0}))})})}))}}]);